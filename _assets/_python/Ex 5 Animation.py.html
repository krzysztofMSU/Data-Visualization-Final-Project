<html>
<head>
<title>Ex 5 Animation.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Ex 5 Animation.py</font>
</center></td></tr></table>
<pre><span class="s0"># Example of animation of pyplot patches</span>
# This example grows and shrinks a Rectangle
# Written by Aaron Gordon, Feb. 2019
#
# See https://nickcharlton.net/posts/drawing-animating-shapes-matplotlib.html
# for (a possibly dated??) discussion and other examples

<span class="s2">import </span><span class="s1">matplotlib.pyplot </span><span class="s2">as </span><span class="s1">plt</span>
<span class="s2">import </span><span class="s1">pandas </span><span class="s2">as </span><span class="s1">pd</span>
<span class="s2">import </span><span class="s1">numpy </span><span class="s2">as </span><span class="s1">np</span>
<span class="s2">from </span><span class="s1">matplotlib.patches </span><span class="s2">import </span><span class="s1">Rectangle</span>
<span class="s2">import </span><span class="s1">matplotlib.animation </span><span class="s2">as </span><span class="s1">animation</span>

<span class="s0"># Reading data from file (in this same directory with exercise_3.py)</span>
<span class="s1">filename = </span><span class="s3">'food_imports.csv'                           </span><span class="s0"># Defines the full name of the file</span>
<span class="s1">data = pd.read_csv(filename</span><span class="s2">, </span><span class="s1">index_col=</span><span class="s4">0</span><span class="s1">).T             </span><span class="s0"># 'T' to transpose data (columns to rows)</span>
<span class="s1">years = data.index.to_list()                            </span><span class="s0"># 'years' are Years</span>
<span class="s1">valuex = data.to_numpy().T.tolist()                     </span><span class="s0"># 'values' for each list in 1 row of each year</span>
<span class="s1">foods = data.columns.to_numpy().tolist()                </span><span class="s0"># 'foods' names</span>


<span class="s1">FRAME_DELTA = </span><span class="s4">100       </span><span class="s0"># milliseconds</span>
<span class="s1">fig</span><span class="s2">, </span><span class="s1">ax = plt.subplots()</span>
rwidth = <span class="s4">.2              </span><span class="s0"># rectangle's width</span>
<span class="s1">rheight = </span><span class="s4">5             </span><span class="s0"># rectangle's height</span>

# values = [7, 12, 14, 18, 24, 25, 21, 19, 13, 6, 5, 6, 4, 5]
# values = pd.DataFrame(np.random.rand(10, 50))
# rect = Rectangle((3, 0), rwidth, rheight)
# print(values, rect)
<span class="s1">values = pd.DataFrame(np.random.rand(</span><span class="s4">10</span><span class="s2">, </span><span class="s4">50</span><span class="s1">))</span>
rect1 = Rectangle((<span class="s4">1</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect2 = Rectangle((<span class="s4">2</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect3 = Rectangle((<span class="s4">3</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect4 = Rectangle((<span class="s4">4</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect5 = Rectangle((<span class="s4">5</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect6 = Rectangle((<span class="s4">6</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect7 = Rectangle((<span class="s4">7</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect8 = Rectangle((<span class="s4">8</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect9 = Rectangle((<span class="s4">9</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>
rect10 = Rectangle((<span class="s4">10</span><span class="s2">, </span><span class="s4">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">rwidth</span><span class="s2">, </span><span class="s1">rheight)</span>

print(values)

<span class="s2">for </span><span class="s1">index </span><span class="s2">in </span><span class="s1">range(len(values)):</span>
    print(<span class="s3">'index in for loop'</span><span class="s2">, </span><span class="s1">index)</span>
<span class="s0">#     rect = Rectangle((0, 0), rwidth, rheight)</span>


<span class="s2">def </span><span class="s1">init():                     </span><span class="s0"># init function for the animation</span>
    <span class="s1">top_y = max(values)</span>
    ax.set_xlim(<span class="s4">0.0</span><span class="s2">, </span><span class="s4">11.0</span><span class="s1">)</span>
    ax.set_ylim(<span class="s4">0.0</span><span class="s2">, </span><span class="s4">50.0</span><span class="s1">)</span>
    rect1.set_height(<span class="s4">0</span><span class="s1">)</span>
    rect1.set_color(<span class="s3">'lawngreen'</span><span class="s1">)</span>
    rect2.set_color(<span class="s3">'r'</span><span class="s1">)</span>
    rect3.set_color(<span class="s3">'orchid'</span><span class="s1">)</span>
    rect4.set_color(<span class="s3">'teal'</span><span class="s1">)</span>
    rect5.set_color(<span class="s3">'salmon'</span><span class="s1">)</span>
    rect6.set_color(<span class="s3">'grey'</span><span class="s1">)</span>
    rect7.set_color(<span class="s3">'y'</span><span class="s1">)</span>
    rect8.set_color(<span class="s3">'royalblue'</span><span class="s1">)</span>
    rect9.set_color(<span class="s3">'gold'</span><span class="s1">)</span>
    rect10.set_color(<span class="s3">'lightcoral'</span><span class="s1">)</span>
    ax.add_patch(rect1)
    ax.add_patch(rect2)
    ax.add_patch(rect3)
    ax.add_patch(rect4)
    ax.add_patch(rect5)
    ax.add_patch(rect6)
    ax.add_patch(rect7)
    ax.add_patch(rect8)
    ax.add_patch(rect9)
    ax.add_patch(rect10)
    <span class="s2">return </span><span class="s1">rect1</span><span class="s2">, </span><span class="s1">rect2</span><span class="s2">, </span><span class="s1">rect3</span><span class="s2">, </span><span class="s1">rect4</span><span class="s2">, </span><span class="s1">rect5</span><span class="s2">, </span><span class="s1">rect6</span><span class="s2">, </span><span class="s1">rect7</span><span class="s2">, </span><span class="s1">rect8</span><span class="s2">, </span><span class="s1">rect9</span><span class="s2">, </span><span class="s1">rect10</span>


<span class="s2">def </span><span class="s1">animate(num):           </span><span class="s0"># called each frame with rectangle height</span>
    <span class="s1">rect1.set_height(num)    </span><span class="s0"># rect has to be global so not garbage collected</span>
    <span class="s1">rect2.set_height(num)</span>
    rect3.set_height(num)
    rect4.set_height(num)
    rect5.set_height(num)
    rect6.set_height(num)
    rect7.set_height(num)
    rect8.set_height(num)
    rect9.set_height(num)
    rect10.set_height(num)
    <span class="s2">return </span><span class="s1">rect1</span><span class="s2">, </span><span class="s1">rect2</span><span class="s2">, </span><span class="s1">rect3</span><span class="s2">, </span><span class="s1">rect4</span><span class="s2">, </span><span class="s1">rect5</span><span class="s2">, </span><span class="s1">rect6</span><span class="s2">, </span><span class="s1">rect7</span><span class="s2">, </span><span class="s1">rect8</span><span class="s2">, </span><span class="s1">rect9</span><span class="s2">, </span><span class="s1">rect10 </span><span class="s0"># return a sequence of patches to draw</span>


<span class="s1">ani = animation.FuncAnimation(fig</span><span class="s2">, </span><span class="s1">animate</span><span class="s2">, </span><span class="s1">frames=FRAME_DELTA</span><span class="s2">, </span><span class="s1">init_func=init</span><span class="s2">,</span>
                              <span class="s1">interval=FRAME_DELTA</span><span class="s2">, </span><span class="s1">repeat=</span><span class="s2">True, </span><span class="s1">blit=</span><span class="s2">True</span><span class="s1">)</span>
plt.show()
</pre>
</body>
</html>